#! /bin/bash
if [ -z "$ACMACSD_ROOT" ]; then
    echo ACMACSD_ROOT not set >&2
    exit 1
fi

failed()
{
    echo "FAILED" >&2
    exit 1
}

trap failed ERR

export LD_LIBRARY_PATH=$ACMACSD_ROOT/lib

# Makefile in acmacs-base also updates external packages
if [ -x $ACMACSD_ROOT/bin/update-acmacs-base ]; then
    $ACMACSD_ROOT/bin/update-acmacs-base
else
    $(dirname $0)/update-acmacs-base
fi

$ACMACSD_ROOT/bin/update-acmacs-packages
