#! /bin/bash
if [ -z "$ACMACSD_ROOT" ]; then
    echo ACMACSD_ROOT not set >&2
    exit 1
fi

failed()
{
    echo "FAILED" >&2
    exit 1
}

trap failed ERR

SRC_DIR="$ACMACSD_ROOT/sources"
PACKAGE_DIR="$SRC_DIR/boost-spirit"

if [ -d "$PACKAGE_DIR" ]; then
    cd "$PACKAGE_DIR"
    git pull
else
    git clone https://github.com/boostorg/spirit.git "$PACKAGE_DIR"
    # cd "$PACKAGE_DIR"
    # git checkout develop
fi
rsync -av "$PACKAGE_DIR"/include/boost $ACMACSD_ROOT/include
