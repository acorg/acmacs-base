# -*- Shell-script -*-
# source it

if [ -z "$ACMACSD_ROOT" ]; then
    echo ACMACSD_ROOT not set >&2
    exit 1
fi

failed()
{
    echo "FAILED" >&2
    exit 1
}

trap failed ERR

# ----------------------------------------------------------------------

function src_dir()
{
    local package="$1"
    if [[ -f /r/ramdisk-id ]]; then
        AD_DIR=/r/AD
    else
        AD_DIR="$ACMACSD_ROOT"
    fi

    SRC_DIR="$AD_DIR"/sources
    mkdir -p "$SRC_DIR"
    PACKAGE_DIR="$SRC_DIR"/$package
}
